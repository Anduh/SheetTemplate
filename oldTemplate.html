<!--*********************************************************************************************************-->
<!--***************************          Top Level Navigation                     ***************************-->
<!--*********************************************************************************************************-->
<input class="sheet_type" name="attr_sheet_type" type="hidden" value="pc">

<input class="type" name="attr_sheet_type" type="hidden" value="core">
<div class="tabs">
	<img class="logo" src="https://raw.githubusercontent.com/clevett/Warhammer40kWrathnGlory/master/wrathglorylogo.png" />
	<!-- Buttong to toggle on GM whisper -->
	<input class="whisper-toggle" type="hidden" name="attr_gm_toggle" value=" " /><button type="action" name="act_whisper">q</button>
	<!-- Buttons to change page view -->
	<button type="action" name="act_sheet_toggle_core" data-i18n="core">Core</button>
	<button type="action" name="act_sheet_toggle_options" data-i18n="options">Options</button>
	<button type="action" name="act_sheet_toggle_npc" data-i18n="npc">NPC</button>
</div>

<!--*********************************************************************************************************-->
<!--***************************             PC SHEET                              ***************************-->
<!--*********************************************************************************************************-->
<div class="pc">
	<button type="roll" value="@{gm_toggle} &{template:rolls}{{header=Title}}{{dice=[[1d20]]}}{{desc=Some Text}}">A Button</button>
	<label>Character name <input name="attr_character_name" title="" type="text". value="" /></label>
</div>

<!--*********************************************************************************************************-->
<!--***************************             NPC SHEET                              ***************************-->
<!--*********************************************************************************************************-->
<div class="npc">
</div>

<!--*********************************************************************************************************-->
<!--***************************              FOOTER                               ***************************-->
<!--*********************************************************************************************************-->
<div class="footer">
	<span>Disclaimer</span>
	<span>Version </span><span name="attr_version"></span>
</div>

<!--*********************************************************************************************************-->
<!--***************************          HIDDEN ATTRIBUTES                        ***************************-->
<!--*********************************************************************************************************-->
	<input type="hidden" name="attr_version" value="1" />

<!--*********************************************************************************************************-->
<!--***************************           ROLL TEMPLATE                           ***************************-->
<!--*********************************************************************************************************-->
	<div class="rolltemplates">
		<rolltemplate class="sheet-rolltemplate-rolls">
		 	<!--- Display a header on the template --->
    		<div class="sheet-template-header">
    			{{#header}}{{header}}{{/header}}
    		</div>
    		<!--- Display the dice roll in the template --->
	    	<div class="sheet-template-body">
	    		{{#dice}}
	    			<div class="sheet-template-row">{{dice}}</div>
	    		{{/dice}}
	    		<!--- Display a description. This is great for text included with a roll --->
		    	{{#desc}}
		    		<div class="sheet-template-row">
		    			<span class="sheet-template-desc">
		    			</span>
		    		</div>
	    		{{/desc}}
	    	</div>
		</rolltemplate>
	</div>

<!--*********************************************************************************************************-->
<!--***************************              SCRIPTS                              ***************************-->
<!--*********************************************************************************************************-->
<script type="text/worker">

['sheet_toggle_core', sheet_toggle_options', 'sheet_toggle_npc'].forEach(attr => {
on(`clicked:${attr}`, function(eventinfo) {
		setAttrs({
			sheet_type : eventinfo.triggerName.split("_")[2]
		});
	});
});

on("clicked:whisper", function(eventinfo) {
	getAttrs(["gm_toggle"], function (v) {
		setAttrs({
			gm_toggle : (v.gm_toggle.includes("gm")) ?  " " : "/w gm"
		}); 
	});
});

</script>